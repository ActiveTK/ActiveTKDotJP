/*!
 * (c) 2023 ActiveTK. <+activetk.jp>
 */
"use strict";function sqrt_fast(n){let t=n/3n;if(n<=0n)return 0n;for(let e=0;e<6;e++)t=(t+n/t)/2n;return t}function find_smallest_factor(n){if(n>9n&&isPrime(n,10)||2n==n)return n;let t=sqrt_fast(n);for(let e=BigInt(2);e<=t;e++){if(n%e===0n)return e;e%500000n===0n&&self.postMessage({status:"working",number:e+"/"+t})}return n}function getRandomInt(n,t){return Math.floor(Math.random()*(t-n+1))+n}function modPow(n,t,e){if(0n===t)return 1n;let r=1n;for(;t>0n;)t%2n===1n&&(r=r*n%e),n=n*n%e,t/=2n;return r}function isPrime(n,t){if(n<=1n)return!1;if(n<=3n)return!0;let e=0n,r=n-1n;for(;r%2n===0n;)e++,r/=2n;for(let s=0;s<t;s++){let f=getRandomInt(2,Number(n-2n)),o=modPow(BigInt(f),r,n);if(1n!==o&&o!==n-1n){for(let i=0n;i<e-1n&&(o=o**2n%n)!=n-1n;i++);if(o!==n-1n)return!1}}return!0}self.addEventListener("message",n=>{let t=BigInt(n.data);if(t<=3n)self.postMessage({status:"find",number:t}),self.postMessage({status:"done"});else for(;;){let e=find_smallest_factor(t);if(t/=e,self.postMessage({status:"find",number:e}),1n==t){self.postMessage({status:"done"});break}}});
